<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ぐらみんアプリ（仮）</title>
    <link rel="manifest" href="https://raw.githubusercontent.com/ctateya/demo/main/manifest.json">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/push.js/1.0.12/push.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsenui.css">
  <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsen-css-components.min.css">
  <script src="https://unpkg.com/onsenui/js/onsenui.min.js"></script>
  </head>

  <body>
    <h1>オンラインスクラッチクラス</h1>
    <h2>今月の授業日程</h2>
    <h2>お申し込みフォーム</h2>
    <p><a href="https://form.gramin.jp/#!/transfer-session-online-scratch">振替のご連絡</a></p>
    <p><a href="https://form.gramin.jp/#!/cancel-session-online-scratch">キャンセルのご連絡</a></p>
    <p><a href="https://gramin.jp/students-form/">その他のご連絡</a></p>
    <center>
   <input type="button" id="push" onclick="return push()" value="クリックするとプッシュ通知が送られます"></button>
  </center>
  
  <template id="main">
  <v-ons-page>
    <v-ons-toolbar>
      <div class="center">{{ title }}</div>
    </v-ons-toolbar>

    <v-ons-tabbar swipeable position="auto"
      :tabs="tabs"
      :visible="true"
      :index.sync="activeIndex"
    >
    </v-ons-tabbar>
  </v-ons-page>
</template>

    
    <script>
     function push(){
      Push.create("お知らせ", 
       {
        body: "授業の時間になりました",
        icon: './icon.png',
        timeout: 4000,
        onClick: function () {
        window.focus(); 
        this.close();
        }
      })
     } 
      
      navigator.serviceWorker.register('https://raw.githubusercontent.com/ctateya/demo/main/service-worker.js').then(function() {
        console.log('サービスワーカーの登録成功');
      }).catch(function(err) {
        console.log('サービスワーカーの登録ができませんでした：', err);
      });
    
      
      const homePage = {
  template: '#home',
  props: ['myProp']
};

const newsPage = {
  template: '#news'
};

const settingsPage = {
  template: '#settings'
};

new Vue({
  el: '#app',
  template: '#main',
  data() {
    return {
      activeIndex: 0,
      tabs: [
        {
          icon: this.md() ? null : 'ion-ios-home',
          label: 'Home',
          page: homePage,
          props: {
            myProp: 'This is a page prop!'
          },
          key: "homePage"
        },
        {
          icon: this.md() ? null : 'ion-ios-bell',
          label: 'News',
          page: newsPage,
          badge: 7,
          key: "newsPage"
        },
        {
          icon: this.md() ? null : 'ion-ios-settings',
          label: 'Settings',
          page: settingsPage,
          key: "settingsPage"
        }
      ]
    };
  },
  methods: {
    md() {
      return this.$ons.platform.isAndroid();
    }
  },
  computed: {
    title() {
      return this.tabs[this.activeIndex].label;
    }
  }
});
    </script>
  </body>
</html>
